{% extends "admin/index.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin/css/admin_custom.css' %}">
{% endblock %}

{% block content %}
<div class="custom-dashboard">
    <div class="dashboard-header">
        <h1>Dashboard de Administración</h1>
        <p class="dashboard-subtitle">Panel de control y estadísticas del sistema</p>
    </div>

    <div class="stats-row">
        <div class="stat-box">
            <div class="stat-icon stat-icon-purple">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                </svg>
            </div>
            <div class="stat-info">
                <p class="stat-label">Calificaciones</p>
                <p class="stat-value" id="stat-calificaciones">-</p>
            </div>
        </div>

        <div class="stat-box">
            <div class="stat-icon stat-icon-pink">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <div class="stat-info">
                <p class="stat-label">Usuarios</p>
                <p class="stat-value" id="stat-usuarios">-</p>
            </div>
        </div>

        <div class="stat-box">
            <div class="stat-icon stat-icon-blue">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                </svg>
            </div>
            <div class="stat-info">
                <p class="stat-label">Mercados</p>
                <p class="stat-value" id="stat-mercados">-</p>
            </div>
        </div>

        <div class="stat-box">
            <div class="stat-icon stat-icon-green">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </div>
            <div class="stat-info">
                <p class="stat-label">Instrumentos</p>
                <p class="stat-value" id="stat-instrumentos">-</p>
            </div>
        </div>
    </div>

    <div class="charts-row">
        <div class="chart-box">
            <h3>Calificaciones por Mes</h3>
            <canvas id="chart-mes"></canvas>
        </div>
        <div class="chart-box">
            <h3>Distribución por Tipo de Agregación</h3>
            <canvas id="chart-tipo"></canvas>
        </div>
    </div>

    <div class="charts-row">
        <div class="chart-box">
            <h3>Calificaciones por Mercado</h3>
            <canvas id="chart-mercado"></canvas>
        </div>
        <div class="chart-box">
            <h3>Calificaciones por Año</h3>
            <canvas id="chart-año"></canvas>
        </div>
    </div>

    <div class="table-box">
        <h3>Calificaciones Recientes</h3>
        <div class="table-wrapper">
            <table id="table-recientes">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Usuario</th>
                        <th>Instrumento</th>
                        <th>Tipo</th>
                        <th>Fecha Pago</th>
                        <th>Año</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="6" class="loading-text">Cargando datos...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="dashboard-separator"></div>

{{ block.super }}

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="{% static 'admin/js/dashboard.js' %}"></script>
{% endblock %}
